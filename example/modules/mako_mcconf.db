<%!
import pytoml as toml
import os.path as path
%>
# vars.config_file is relative to the position of mcconf.db, ie the original dstdir
# vars.mcconf_dir is relative to the position of mcconf.db
# vars.dest_dir is relative to the config_file
<%
out = dict()
out["vars"] = vars.__dict__.copy()
out["vars"]["config_file"] = path.relpath(vars.config_file, dstdir)
out["vars"]["dest_dir"] = path.relpath(dstdir, path.dirname(vars.config_file))
out["vars"]["mcconf"] = path.relpath(vars.mcconf, dstdir)
out["files"] = dict((dst,path.relpath(allfiles[dst].srcfile,dstdir)) for dst in allfiles)
%>\
${toml.dumps(out)}
